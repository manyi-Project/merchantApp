<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
	<title></title>
	<script src="http://api.map.baidu.com/api?v=1.3" type="text/javascript"></script>
</head>
<body>
<div  id="aaa" style="border:#ccc solid 1px;width:697px;height:500px"></div>
<script type="text/javascript">
	if(navigator.geolocation)
	{
		navigator.geolocation.getCurrentPosition(function (p) {
					var latitude = p.coords.latitude//纬度
					var longitude = p.coords.longitude;
					createmap(latitude, longitude);

				}, function (e) {//错误信息
					var aa = e.code + "\n" + e.message;
					alert("错误"+aa);
				}
		);
	}
	function createmap(a,b)
	{
		var map = new BMap.Map("aaa");
		var point = new BMap.Point(b, a);
		map.centerAndZoom(point, 20);//设置地图的中心点和坐标
		Window.map = map;//将map变量存储在全局
		//判断城市
		var gc = new BMap.Geocoder();
		gc.getLocation(point, function(rs){
			var addComp = rs.addressComponents;
			alert(addComp.province)
		})
	}


</script>
</body>
</html>